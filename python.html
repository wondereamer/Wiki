<!DOCTYPE html>
<html>
    <head>
        <title>pythonç¼–ç¨‹æ ‡å‡†</title>
        <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
        <link rel="Stylesheet" type="text/css" href="style.css" />
        <script type="text/javascript" src="syntaxhighlighter/scripts/shCore.js"></script>
        <link type="text/css" rel="Stylesheet" href="syntaxhighlighter/styles/shCore.css"/>
        <link type="text/css" rel="Stylesheet" href="syntaxhighlighter/styles/shThemeDefault.css"/>
        <script type="text/javascript" src="jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="vimwiki.js"></script>
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>

    <body>

            <div class="content">
                
<div class="toc">
<ul>
<li><a href="#toc_1">PEP8 Python ç¼–ç è§„èŒƒ</a>
<ul>
<li><a href="#toc_1.1">ä¸€ ä»£ç ç¼–æ’</a>
<li><a href="#toc_1.2">äºŒ æ–‡æ¡£ç¼–æ’</a>
<li><a href="#toc_1.3">ä¸‰ ç©ºæ ¼çš„ä½¿ç”¨ </a>
<li><a href="#toc_1.4">å›› æ³¨é‡Š</a>
<li><a href="#toc_1.5">äº” æ–‡æ¡£æè¿°</a>
<li><a href="#toc_1.6">å…­ å‘½åè§„èŒƒ</a>
<li><a href="#toc_1.7">ä¸ƒ ç¼–ç å»ºè®®</a>
<li><a href="#toc_1.8">Reference</a>
</ul>
</ul>
</div>
<p>
<a href="index.html">ä¸»é¡µ</a>
</p>
<h1 id="toc_1" class="justcenter">PEP8 Python ç¼–ç è§„èŒƒ</h1>
<h2 id="toc_1.1">ä¸€ ä»£ç ç¼–æ’</h2>
<ol>
<li>
ç¼©è¿›ã€‚4ä¸ªç©ºæ ¼çš„ç¼©è¿›ï¼ˆç¼–è¾‘å™¨éƒ½å¯ä»¥å®Œæˆæ­¤åŠŸèƒ½ï¼‰ï¼Œä¸ä½¿ç”¨Tapï¼Œæ›´ä¸èƒ½æ··åˆä½¿ç”¨Tapå’Œç©ºæ ¼ã€‚

<li>
æ¯è¡Œæœ€å¤§é•¿åº¦79ï¼Œæ¢è¡Œå¯ä»¥ä½¿ç”¨åæ–œæ ï¼Œæœ€å¥½ä½¿ç”¨åœ†æ‹¬å·ã€‚æ¢è¡Œç‚¹è¦åœ¨æ“ä½œç¬¦çš„åè¾¹æ•²å›è½¦ã€‚

<li>
*ç±»å’Œtop-levelå‡½æ•°å®šä¹‰ä¹‹é—´ç©ºä¸¤è¡Œï¼›ç±»ä¸­çš„æ–¹æ³•å®šä¹‰ä¹‹é—´ç©ºä¸€è¡Œï¼›å‡½æ•°å†…é€»è¾‘æ— å…³æ®µè½ä¹‹é—´ç©ºä¸€è¡Œï¼›å…¶ä»–åœ°æ–¹å°½é‡ä¸è¦å†ç©ºè¡Œã€‚*

</ol>

<h2 id="toc_1.2">äºŒ æ–‡æ¡£ç¼–æ’</h2>
<ol>
<li>
*æ¨¡å—å†…å®¹çš„é¡ºåºï¼šæ¨¡å—è¯´æ˜å’Œdocstringâ€”importâ€”globals&amp;constantsâ€”å…¶ä»–å®šä¹‰ã€‚å…¶ä¸­importéƒ¨åˆ†ï¼ŒåˆæŒ‰æ ‡å‡†ã€ä¸‰æ–¹å’Œè‡ªå·±ç¼–å†™é¡ºåºä¾æ¬¡æ’æ”¾ï¼Œä¹‹é—´ç©ºä¸€è¡Œã€‚*

<li>
<strong>ä¸è¦åœ¨ä¸€å¥importä¸­å¤šä¸ªåº“ï¼Œæ¯”å¦‚import os, sysä¸æ¨èã€‚ä½†æ˜¯å¯ä»¥ from xx import x1, x2</strong>

<li>
Wildcard imports (from &lt;module&gt; import *) should be avoided. 

</ol>
<h2 id="toc_1.3">ä¸‰ ç©ºæ ¼çš„ä½¿ç”¨ </h2>
<blockquote>
æ€»ä½“åŸåˆ™ï¼Œé¿å…ä¸å¿…è¦çš„ç©ºæ ¼ã€‚
</blockquote>
<ol>
<li>
å„ç§å³æ‹¬å·å‰ä¸è¦åŠ ç©ºæ ¼ã€‚

<li>
é€—å·ã€å†’å·ã€åˆ†å·å‰ä¸è¦åŠ ç©ºæ ¼ã€‚

<li>
å‡½æ•°çš„å·¦æ‹¬å·å‰ä¸è¦åŠ ç©ºæ ¼ã€‚å¦‚Func(1)ã€‚

<li>
åºåˆ—çš„å·¦æ‹¬å·å‰ä¸è¦åŠ ç©ºæ ¼ã€‚å¦‚list[2]ã€‚

<li>
æ“ä½œç¬¦å·¦å³å„åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œä¸è¦ä¸ºäº†å¯¹é½å¢åŠ ç©ºæ ¼ã€‚

<li>
*å‡½æ•°é»˜è®¤å‚æ•°ä½¿ç”¨çš„èµ‹å€¼ç¬¦å·¦å³çœç•¥ç©ºæ ¼ã€‚*

<li>
ä¸è¦å°†å¤šå¥è¯­å¥å†™åœ¨åŒä¸€è¡Œï¼Œå°½ç®¡ä½¿ç”¨â€˜ï¼›â€™å…è®¸ã€‚

<li>
*if/for/whileè¯­å¥ä¸­ï¼Œå³ä½¿æ‰§è¡Œè¯­å¥åªæœ‰ä¸€å¥ï¼Œä¹Ÿå¿…é¡»å¦èµ·ä¸€è¡Œã€‚*

</ol>

<h2 id="toc_1.4">å›› æ³¨é‡Š</h2>
<ol>
<li>
æ³¨é‡Šå¿…é¡»ä½¿ç”¨è‹±æ–‡ï¼Œæœ€å¥½æ˜¯å®Œæ•´çš„å¥å­ï¼Œé¦–å­—æ¯å¤§å†™ï¼Œå¥åè¦æœ‰ç»“æŸç¬¦ï¼Œç»“æŸç¬¦åè·Ÿä¸¤ä¸ªç©ºæ ¼ï¼Œå¼€å§‹ä¸‹ä¸€å¥ã€‚å¦‚æœæ˜¯çŸ­è¯­ï¼Œå¯ä»¥çœç•¥ç»“æŸç¬¦ã€‚

<li>
å—æ³¨é‡Šï¼Œåœ¨ä¸€æ®µä»£ç å‰å¢åŠ çš„æ³¨é‡Šã€‚åœ¨â€˜#â€™ååŠ ä¸€ç©ºæ ¼ã€‚æ®µè½ä¹‹é—´ä»¥åªæœ‰â€˜#â€™çš„è¡Œé—´éš”ã€‚æ¯”å¦‚ï¼š

</ol>

<h2 id="toc_1.5">äº” æ–‡æ¡£æè¿°</h2>
<ol>
<li>
*ä¸ºæ‰€æœ‰çš„publicæ¨¡å—ã€å‡½æ•°ã€ç±»ã€æ–¹æ³•å†™docstringsï¼›épublicçš„æ²¡æœ‰å¿…è¦ï¼Œä½†æ˜¯å¯ä»¥å†™æ³¨é‡Šï¼ˆåœ¨defçš„ä¸‹ä¸€è¡Œï¼‰ã€‚*

<li>
*å¦‚æœdocstringè¦æ¢è¡Œï¼Œå‚è€ƒå¦‚ä¸‹ä¾‹å­,ä¸æ¢è¡Œéƒ½å†™åœ¨åŒä¸€è¡Œå°±å¯ä»¥äº†ã€‚*
<pre>
"""Form a complex number.

Args:
    name (str): The name to use
    state (bool): Blablabla..
    
Returns:
    int. The result
    
Raises:
    KeyError
"""
</pre>

<li>
å¯¹äºä¸æ˜¯ä¸€ç›®äº†ç„¶çš„ä»£ç ï¼Œåœ¨è¡Œä¸ºæ·»åŠ æ³¨é‡Š
<pre>
# We use a weighted dictionary search to find out where i is in
# the array.  We extrapolate position based on the largest num
# in the array and the array size and then do binary search to
# get the exact number.

if i &amp; (i-1) == 0:        # true iff i is a power of 2

</pre>

<li>
ç±»ä¸­å¦‚æœæœ‰å…¬å…±å±æ€§ï¼Œè¦åŠ "Attributes:" æè¿°

<li>
TODO(kl@gmail.com): Drop the use of "has_key".
  TODO(Zeke) change this to use relations.

</ol>
 
<h2 id="toc_1.6">å…­ å‘½åè§„èŒƒ</h2>
<blockquote>
æ€»ä½“åŸåˆ™ï¼Œæ–°ç¼–ä»£ç å¿…é¡»æŒ‰ä¸‹é¢å‘½åé£æ ¼è¿›è¡Œï¼Œç°æœ‰åº“çš„ç¼–ç å°½é‡ä¿æŒé£æ ¼ã€‚
</blockquote>
<ol>
<li>
ä¸è¦å•ç‹¬ä½¿ç”¨å°å†™å­—æ¯â€˜lâ€™ï¼Œå¤§å†™å­—æ¯â€˜Oâ€™ç­‰å®¹æ˜“æ··æ·†çš„å­—æ¯ã€‚

<li>
æ¨¡å—å‘½åå°½é‡çŸ­å°ï¼Œä½¿ç”¨å…¨éƒ¨å°å†™çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚

<li>
åŒ…å‘½åå°½é‡çŸ­å°ï¼Œä½¿ç”¨å…¨éƒ¨å°å†™çš„æ–¹å¼ï¼Œä¸å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚

<li>
ç±»çš„å‘½åä½¿ç”¨CapWordsçš„æ–¹å¼ï¼Œæ¨¡å—å†…éƒ¨ä½¿ç”¨çš„ç±»é‡‡ç”¨_CapWordsçš„æ–¹å¼ã€‚

<li>
å¼‚å¸¸å‘½åä½¿ç”¨CapWords+Erroråç¼€çš„æ–¹å¼ã€‚

<li>
å…¨å±€å˜é‡å°½é‡åªåœ¨æ¨¡å—å†…æœ‰æ•ˆï¼Œç±»ä¼¼Cè¯­è¨€ä¸­çš„staticã€‚å®ç°æ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸€æ˜¯_<em>all</em>_æœºåˆ¶;äºŒæ˜¯å‰ç¼€ä¸€ä¸ªä¸‹åˆ’çº¿ã€‚

<li>
å‡½æ•°å‘½åä½¿ç”¨å…¨éƒ¨å°å†™çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚

<li>
å¸¸é‡å‘½åä½¿ç”¨å…¨éƒ¨å¤§å†™çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚

<li>
ç±»çš„å±æ€§ï¼ˆæ–¹æ³•å’Œå˜é‡ï¼‰å‘½åä½¿ç”¨å…¨éƒ¨å°å†™çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚

<li>
ç±»çš„å±æ€§æœ‰3ç§ä½œç”¨åŸŸpublicã€non-publicå’Œsubclass APIï¼Œå¯ä»¥ç†è§£æˆC++ä¸­çš„publicã€privateã€protectedï¼Œnon-publicå±æ€§å‰ï¼Œå‰ç¼€ä¸€æ¡ä¸‹åˆ’çº¿ã€‚

<li>
ç±»çš„å±æ€§è‹¥ä¸å…³é”®å­—åå­—å†²çªï¼Œåç¼€ä¸€ä¸‹åˆ’çº¿ï¼Œå°½é‡ä¸è¦ä½¿ç”¨ç¼©ç•¥ç­‰å…¶ä»–æ–¹å¼ã€‚

<li>
ä¸ºé¿å…ä¸å­ç±»å±æ€§å‘½åå†²çªï¼Œåœ¨ç±»çš„ä¸€äº›å±æ€§å‰ï¼Œå‰ç¼€ä¸¤æ¡ä¸‹åˆ’çº¿ã€‚æ¯”å¦‚ï¼šç±»Fooä¸­å£°æ˜__a,è®¿é—®æ—¶ï¼Œåªèƒ½é€šè¿‡Foo.<em>Foo</em>_aï¼Œé¿å…æ­§ä¹‰ã€‚å¦‚æœå­ç±»ä¹Ÿå«Fooï¼Œé‚£å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚

<li>
ç±»çš„æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯selfï¼Œè€Œé™æ€æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯clsã€‚

<li>
cå’Œc++æ‰©å±•æ¨¡å—åä»¥ä¸‹æ»‘çº¿å¼€å¤´æ¯”å¦‚_socket

</ol>
<h2 id="toc_1.7">ä¸ƒ ç¼–ç å»ºè®®</h2>
<ol>
<li>
ç¼–ç ä¸­è€ƒè™‘åˆ°å…¶ä»–pythonå®ç°çš„æ•ˆç‡ç­‰é—®é¢˜ï¼Œæ¯”å¦‚è¿ç®—ç¬¦â€˜+â€™åœ¨CPythonï¼ˆPythonï¼‰ä¸­æ•ˆç‡å¾ˆé«˜ï¼Œéƒ½æ˜¯Jythonä¸­å´éå¸¸ä½ï¼Œæ‰€ä»¥åº”è¯¥é‡‡ç”¨.join()çš„æ–¹å¼ã€‚

<li>
å°½å¯èƒ½ä½¿ç”¨â€˜isâ€™â€˜is notâ€™å–ä»£â€˜==â€™ï¼Œæ¯”å¦‚if x is not None è¦ä¼˜äºif xã€‚

<li>
ä½¿ç”¨startswith() and endswith()ä»£æ›¿åˆ‡ç‰‡è¿›è¡Œåºåˆ—å‰ç¼€æˆ–åç¼€çš„æ£€æŸ¥ã€‚æ¯”å¦‚ï¼š
<pre>
Yes:  if foo.startswith('bar'):
No:  if foo[:3] == 'bar':
</pre>

<li>
ä½¿ç”¨isinstance()æ¯”è¾ƒå¯¹è±¡çš„ç±»å‹ã€‚æ¯”å¦‚
<pre>
Yes:  if isinstance(obj, int):
No:  if type(obj) is type(1):
</pre>

<li>
åˆ¤æ–­åºåˆ—ç©ºæˆ–ä¸ç©ºï¼Œæœ‰å¦‚ä¸‹è§„åˆ™
<pre>
Yes:  if not seq:
      if seq:
No:  if len(seq)
     if not len(seq)
</pre>

<li>
å­—ç¬¦ä¸²ä¸è¦ä»¥ç©ºæ ¼æ”¶å°¾ã€‚

<li>
äºŒè¿›åˆ¶æ•°æ®åˆ¤æ–­ä½¿ç”¨ if boolvalueçš„æ–¹å¼ã€‚

<li>
åœ¨Pythonä¸­, å¯¹äºçç¢åˆä¸å¤ªé‡è¦çš„è®¿é—®å‡½æ•°, ä½ åº”è¯¥ç›´æ¥ä½¿ç”¨å…¬æœ‰å˜é‡æ¥å–ä»£å®ƒä»¬, è¿™æ ·å¯ä»¥é¿å…é¢å¤–çš„å‡½æ•°è°ƒç”¨å¼€é”€. 
  å½“æ·»åŠ æ›´å¤šåŠŸèƒ½æ—¶, ä½ å¯ä»¥ç”¨å±æ€§(property)æ¥ä¿æŒè¯­æ³•çš„ä¸€è‡´æ€§.

<li>
å¦‚æœä½¿ç”¨property, å†…éƒ¨ä¸è¦æœ‰è®¡ç®—é‡å¤§çš„ä»£ç ï¼Œå› ä¸ºå®ƒå®¹æ˜“ä½¿ä½¿ç”¨è€…è¯¯ã€‚è®¤ä¸ºè®¡ç®—é‡å¾ˆå°ã€‚

<li>
ä½¿ç”¨åŸºäºç±»çš„å¼‚å¸¸ï¼Œæ¯ä¸ªæ¨¡å—æˆ–åŒ…éƒ½æœ‰è‡ªå·±çš„å¼‚å¸¸ç±»ï¼Œæ­¤å¼‚å¸¸ç±»ç»§æ‰¿è‡ªExceptionã€‚

<li>
å¼‚å¸¸ä¸­ä¸è¦ä½¿ç”¨è£¸éœ²çš„exceptï¼Œexceptåè·Ÿå…·ä½“çš„exceptionsã€‚

<li>
å¼‚å¸¸ä¸­tryçš„ä»£ç å°½å¯èƒ½å°‘ã€‚æ¯”å¦‚ï¼š
<pre class="brush: python">
try:
    value = collection[key]
except KeyError:
    return key_not_found(key)
else:
    return handle_value(value)
è¦ä¼˜äº
try:
# Too broad!
    return handle_value(collection[key])
except KeyError:
# Will also catch KeyError raised by handle_value()
    return key_not_found(key)
</pre>

<li>
å¯¹é½é£æ ¼
<pre class="brush: python">
# Aligned with opening delimiter
foo = long_function_name(var_one, var_two,
                         var_three, var_four)

# More indentation included to distinguish this from the rest.
def long_function_name(
        var_one, var_two, var_three,
        var_four):
    print(var_one)


my_list = [
    1, 2, 3,
    4, 5, 6,
 ]
result = some_function_that_takes_arguments(
    'a', 'b', 'c',
    'd', 'e', 'f',
 )
</pre>

<li>
åœ¨Pythonä¸­, pychecker, pydocä»¥åŠå•å…ƒæµ‹è¯•è¦æ±‚æ¨¡å—å¿…é¡»æ˜¯å¯å¯¼å…¥çš„. 
  ä½ çš„ä»£ç åº”è¯¥åœ¨æ‰§è¡Œä¸»ç¨‹åºå‰æ€»æ˜¯æ£€æŸ¥ if _<em>name</em>_ == '_<em>main</em>_' , è¿™æ ·å½“æ¨¡å—è¢«å¯¼å…¥æ—¶ä¸»ç¨‹åºå°±ä¸ä¼šè¢«æ‰§è¡Œ

<li>
Always use a def statement instead of an assignment statement that binds a lambda expression directly to a name.
  Yes: <code>def f(x): return 2*x</code>    No: <code>f = lambda x: 2*x</code>

<li>
When raising an exception in Python 2, use raise ValueError('message') instead of the older form raise ValueError, 'message'.

<li>
When implementing ordering operations with rich comparisons, it is best to implement all six operations 
  (_<em>eq</em>_, _<em>ne</em>_, _<em>lt</em>_, _<em>le</em>_, _<em>gt</em>_, _<em>ge</em>_) rather than relying on other code to only exercise a particular comparison.
  To minimize the effort involved, the functools.total_ordering() decorator provides a tool to generate missing comparison methods.

<li>
When a resource is local to a particular section of code, use a with statement to ensure it is cleaned up promptly and 
  reliably after use. A try/finally statement is also acceptable.

<li>
When checking if an object is a string, keep in mind that it might be a unicode string too! In Python 2, str and unicode have a 
  common base class, basestring, so you can do:
  <code>if isinstance(obj, basestring):</code>
  Note that in Python 3, unicode and basestring no longer exist (there is only str) and a bytes object is no longer a 
  kind of string (it is a sequence of integers instead)

<li>
Don't write string literals that rely on significant trailing whitespace. Such
  trailing whitespace is visually indistinguishable and some editors (or more
  recently, reindent.py) will trim them.

<li>
If operators with different priorities are used, consider adding whitespace around the operators with the lowest priority(ies).
  Use your own judgment; however, never use more than one space, and always have the same amount of whitespace on both sides of a binary operator.
<pre class="brush: python">
Yes:
i = i + 1
submitted += 1
x = x*2 - 1
hypot2 = x*x + y*y
c = (a+b) * (a-b)
No:

i=i+1
submitted +=1
x = x * 2 - 1
hypot2 = x * x + y * y
c = (a + b) * (a - b)
</pre>

</ol>
  
<h2 id="toc_1.8">Reference</h2>
<pre>
http://www.douban.com/note/134971609/
http://www.python.org/dev/peps/pep-0008/
</pre>

            </div>

        <script src="syntaxhighlighter/scripts/shAutoloader.js" type="text/javascript"></script>
        <script type="text/javascript">
            var root_path='';
            function path()
                {
                    var scripts_path=root_path+'syntaxhighlighter/scripts/';
                    var args = arguments, result = [];
                    for(var i = 0; i < args.length; i++)
                        result.push(args[i].replace('@', scripts_path));
                    return result
                };
                SyntaxHighlighter.autoloader.apply(null, path(
                            'applescript            @shBrushAppleScript.js',
                            'actionscript3 as3      @shBrushAS3.js',
                            'bash shell             @shBrushBash.js',
                            'powershell ps          @shBrushPowerShell.js',
                            'coldfusion cf          @shBrushColdFusion.js',
                            'cpp c                  @shBrushCpp.js',
                            'c# c-sharp csharp      @shBrushCSharp.js',
                            'css                    @shBrushCss.js',
                            'delphi pascal          @shBrushDelphi.js',
                            'diff patch pas         @shBrushDiff.js',
                            'erl erlang             @shBrushErlang.js',
                            'groovy                 @shBrushGroovy.js',
                            'java                   @shBrushJava.js',
                            'jfx javafx             @shBrushJavaFX.js',
                            'js jscript javascript  @shBrushJScript.js',
                            'perl pl                @shBrushPerl.js',
                            'php                    @shBrushPhp.js',
                            'text plain             @shBrushPlain.js',
                            'py python              @shBrushPython.js',
                            'ruby rails ror rb      @shBrushRuby.js',
                            'sass scss              @shBrushSass.js',
                            'scala                  @shBrushScala.js',
                            'sql                    @shBrushSql.js',
                            'vb vbnet               @shBrushVb.js',
                            'xml xhtml xslt html    @shBrushXml.js'
                            ));
            SyntaxHighlighter.config.space=' ';//Ïû³ıChrome¸´ÖÆÊ±µÄ¿Õ°×BUG
            <!--SyntaxHighlighter.config.clipboardSwf = '"syntaxhighlighter/scripts/clipboard.swf'-->
            <!--SyntaxHighlighter.config.strings = {-->
                <!--expandSource : 'Õ¹¿ª´úÂë',-->
                    <!--viewSource : '²é¿´´úÂë',-->
                    <!--copyToClipboard : '¸´ÖÆ´úÂë',-->
                    <!--copyToClipboardConfirmation : '´úÂë¸´ÖÆ³É¹¦',-->
                    <!--print : '´òÓ¡',-->
                    <!--help : '?',-->
                    <!--alert: 'Óï·¨¸ßÁÁ\n\n',-->
                    <!--noBrush : '²»ÄÜÕÒµ½Ë¢×Ó: ',-->
                    <!--brushNotHtmlScript : 'Ë¢×ÓÃ»ÓĞÅäÖÃhtml-scriptÑ¡Ïî',-->
                    <!--aboutDialog : '<div></div>'-->
                    <!--}-->
            
            SyntaxHighlighter.all();
            </script>
        </body>
    </html>

